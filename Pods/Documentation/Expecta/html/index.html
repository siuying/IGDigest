<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Expecta 0.2.1 Reference</title>
		<link rel="stylesheet" type="text/css" href="css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.0.5 (build 789)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="index.html">Expecta 0.2.1 </a></h1>
				<a id="developerHome" href="index.html">Peter Jihoon Kim</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">Expecta 0.2.1 Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar"></ul>
		</header>
		<article>
			<div id="overview_contents" role="main">
				<div class="main-navigation navigation-top">
					<a href="hierarchy.html">Next</a>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">Expecta 0.2.1 Reference</h1>
					</div>		
				</div>
				<div id="container">
					
					<div class="section section-overview index-overview">
						
						
						<h1><a href="Classes/Expecta.html">Expecta</a></h1>

<p>A Matcher Framework for Objective-C/Cocoa</p>

<h2>NOTICE</h2>

<p><a href="Classes/Expecta.html">Expecta</a> 0.2.x has a new syntax that is slightly different from <a href="Classes/Expecta.html">Expecta</a> 0.1.x. For example <code>expect(x).toEqual(y)</code> should now be written as <code>expect(x).to.equal(y)</code>. You can do <code>#define EXP_OLD_SYNTAX</code> before importing <code></code>Expecta<code>.h</code> to enable backward-compatiblity mode, but keep in mind that the old syntax is deprecated.</p>

<h2>INTRODUCTION</h2>

<p>The main advantage of using <a href="Classes/Expecta.html">Expecta</a> over other matcher frameworks is that you do not have to specify the data types. Also, the syntax of <a href="Classes/Expecta.html">Expecta</a> matchers is much more readable and does not suffer from parenthesitis.</p>

<p><strong>OCHamcrest</strong></p>

<p><code>objective-c
assertThat(@"foo", is(equalTo(@"foo")));
assertThatUnsignedInteger(foo, isNot(equalToUnsignedInteger(1)));
assertThatBool([bar isBar], is(equalToBool(YES)));
assertThatDouble(baz, is(equalToDouble(3.14159)));
</code></p>

<p>vs.</p>

<p><strong><a href="Classes/Expecta.html">Expecta</a></strong></p>

<p><code>objective-c
expect(@"foo").to.equal(@"foo"); // `to` is a syntatic sugar and can be safely omitted.
expect(foo).notTo.equal(1);
expect([bar isBar]).to.equal(YES);
expect(baz).to.equal(3.14159);
</code></p>

<h2>SETUP</h2>

<p>Use <a href="https://github.com/CocoaPods/CocoaPods">CocoaPods</a></p>

<p>```ruby
dependency &lsquo;Expecta&rsquo;, &lsquo;~> 0.2.1&rsquo;</p>

<h1>dependency &lsquo;Specta&rsquo;, &lsquo;~> 0.1.7&rsquo; # specta bdd framework</h1>

<p>```</p>

<p>or</p>

<ol>
<li>Clone from Github.</li>
<li>Run <code>rake</code> in project root to build.</li>
<li>Copy and add all header files in <code>products</code> folder to the Spec/Test target in your Xcode project.</li>
<li>For <strong>OS X projects</strong>, copy and add <code>libExpecta-macosx.a</code> in <code>products</code> folder to the Spec/Test target in your Xcode project.
For <strong>iOS projects</strong>, copy and add <code>libExpecta-ios-universal.a</code> in <code>products</code> folder to the Spec/Test target in your Xcode project.</li>
<li>Add <code>-ObjC</code> to the &ldquo;Other Linker Flags&rdquo; build setting for the Spec/Test target in your Xcode project.</li>
<li>Add the following to your test code.</li>
</ol>


<p>```objective-c
// #define EXP_OLD_SYNTAX // enable backward-compatibility</p>

<h1>define EXP_SHORTHAND</h1>

<h1>import &ldquo;<a href="Classes/Expecta.html">Expecta</a>.h&rdquo;</h1>

<p>```</p>

<p>If <code>EXP_SHORTHAND</code> is not defined, expectations must be written with <code>EXP_expect</code> instead of <code>expect</code>.</p>

<p><a href="Classes/Expecta.html">Expecta</a> is framework-agnostic. It works well with OCUnit (SenTestingKit) and OCUnit-compatible test frameworks such as <a href="http://github.com/petejkim/specta/">Specta</a>, <a href="http://github.com/gabriel/gh-unit/">GHUnit</a> and <a href="http://code.google.com/p/google-toolbox-for-mac/">GTMUnit</a>. <a href="Classes/Expecta.html">Expecta</a> also supports <a href="http://pivotal.github.com/cedar/">Cedar</a>.</p>

<h2>BUILT-IN MATCHERS</h2>

<blockquote><p><code>expect(x).to.equal(y);</code> compares objects or primitives x and y and passes if they are identical (==) or equivalent (isEqual:).</p>

<p><code>expect(x).to.beIdenticalTo(y);</code> compares objects x and y and passes if they are identical and have the same memory address.</p>

<p><code>expect(x).to.beNil();</code> passes if x is nil.</p>

<p><code>expect(x).to.beTruthy();</code> passes if x evaluates to true (non-zero).</p>

<p><code>expect(x).to.beFalsy();</code> passes if x evaluates to false (zero).</p>

<p><code>expect(x).to.contain(y);</code> passes if an instance of NSArray or NSString x contains y.</p>

<p><code>expect(x).to.haveCountOf(y);</code> passes if an instance of NSArray, NSSet, NSDictionary or NSString x has a count or length of y.</p>

<p><code>expect(x).to.beEmpty();</code> passes if an instance of NSArray, NSSet, NSDictionary or NSString x has a count or length of 0.</p>

<p><code>expect(x).to.beInstanceOf([Foo class]);</code> passes if x is an instance of a class Foo.</p>

<p><code>expect(x).to.beKindOf([Foo class]);</code> passes if x is an instance of a class Foo or if x is an instance of any class that inherits from the class Foo.</p>

<p><code>expect([Foo class]).to.beSubclassOf([Bar class]);</code> passes if the class Foo is a subclass of the class Bar or if it is identical to the class Bar. Use beKindOf() for class clusters.</p>

<p><code>expect(x).to.beLessThan(y);</code> passes if <code>x</code> is less than <code>y</code>.</p>

<p><code>expect(x).to.beLessThanOrEqualTo(y);</code> passes if <code>x</code> is less than or equal to <code>y</code>.</p>

<p><code>expect(x).to.beGreaterThan(y);</code> passes if <code>x</code> is greater than <code>y</code>.</p>

<p><code>expect(x).to.beGreaterThanOrEqualTo(y);</code> passes if <code>x</code> is greater than or equal to <code>y</code>.</p>

<p><code>expect(x).to.beInTheRangeOf(y,z);</code> passes if <code>x</code> is in the range of <code>y</code> and <code>z</code>.</p>

<p><code>expect(x).to.beCloseTo(y);</code> passes if <code>x</code> is close to <code>y</code>.</p>

<p><code>expect(x).to.beCloseToWithin(y, z);</code> passes if <code>x</code> is close to <code>y</code> within <code>z</code>.</p>

<p><code>expect(^{ /* code */ }).to.raise(@"ExceptionName");</code> passes if a given block of code raises an exception named <code>ExceptionName</code>.</p>

<p><code>expect(^{ /* code */ }).to.raiseAny();</code> passes if a given block of code raises any exception.</p></blockquote>

<p><strong>Please contribute more matchers.</strong></p>

<h2>INVERTING MATCHERS</h2>

<p>Every matcher&rsquo;s criteria can be inverted by prepending <code>.notTo</code> or <code>.toNot</code>:</p>

<blockquote><p><code>expect(x).notTo.equal(y);</code> compares objects or primitives x and y and passes if they are <em>not</em> equivalent.</p></blockquote>

<h2>ASYNCHRONOUS TESTING</h2>

<p>Every matcher can be made to perform asynchronous testing by prepending <code>.will</code> or <code>.willNot</code>:</p>

<blockquote><p><code>expect(x).will.beNil();</code> passes if x becomes nil before the timeout.</p>

<p><code>expect(x).willNot.beNil();</code> passes if x becomes non-nil before the timeout.</p></blockquote>

<p>Default timeout is 1.0 second. This setting can be changed by calling <code>[Expecta setAsynchronousTestTimeout:x]</code>, where x is the desired timeout.</p>

<h2>WRITING NEW MATCHERS</h2>

<p>Writing a new matcher is easy with special macros provided by Expecta. Take a look at how <code>.beKindOf()</code> matcher is defined:</p>

<p><code>EXPMatchers+beKindOf.h</code></p>

<p>```objective-c</p>

<h1>import &ldquo;Expecta.h&rdquo;</h1>

<p>EXPMatcherInterface(beKindOf, (Class expected));
// 1st argument is the name of the matcher function
// 2nd argument is the list of arguments that may be passed in the function call.
// Multiple arguments are fine. (e.g. (int foo, float bar))</p>

<h1>define beAKindOf beKindOf</h1>

<p>```</p>

<p><code>EXPMatchers+beKindOf.m</code></p>

<p>```objective-c</p>

<h1>import &ldquo;EXPMatchers+beKindOf.h&rdquo;</h1>

<p>EXPMatcherImplementationBegin(beKindOf, (Class expected)) {
  BOOL actualIsNil = (actual == nil);
  BOOL expectedIsNil = (expected == nil);</p>

<p>  prerequisite(^BOOL{</p>

<pre><code>return !(actualIsNil || expectedIsNil);
// Return `NO` if matcher should fail whether or not the result is inverted using `.Not`.
</code></pre>

<p>  });</p>

<p>  match(^BOOL{</p>

<pre><code>return [actual isKindOfClass:expected];
// Return `YES` if the matcher should pass, `NO` if it should not.
// The actual value/object is passed as `actual`.
// Please note that primitive values will be wrapped in NSNumber/NSValue.
</code></pre>

<p>  });</p>

<p>  failureMessageForTo(^NSString *{</p>

<pre><code>if(actualIsNil) return @"the actual value is nil/null";
if(expectedIsNil) return @"the expected value is nil/null";
return [NSString stringWithFormat:@"expected: a kind of %@, "
                                   "got: an instance of %@, which is not a kind of %@",
                                   [expected class], [actual class], [expected class]];
// Return the message to be displayed when the match function returns `YES`.
</code></pre>

<p>  });</p>

<p>  failureMessageForNotTo(^NSString *{</p>

<pre><code>if(actualIsNil) return @"the actual value is nil/null";
if(expectedIsNil) return @"the expected value is nil/null";
return [NSString stringWithFormat:@"expected: not a kind of %@, "
                                   "got: an instance of %@, which is a kind of %@",
                                   [expected class], [actual class], [expected class]];
// Return the message to be displayed when the match function returns `NO`.
</code></pre>

<p>  });
}
EXPMatcherImplementationEnd
```</p>

<h2>DYNAMIC PREDICATE MATCHERS</h2>

<p>It is possible to add predicate matchers by simply defining the matcher interface, with the matcher implementation being handled at runtime by delegating to the predicate method on your object.</p>

<p>For instance, if you have the following class:</p>

<p>```objc
@interface LightSwitch : NSObject
@property (nonatomic, assign, getter=isTurnedOn) BOOL turnedOn;
@end</p>

<p>@implementation LightSwitch
@synthesize turnedOn;
@end
```</p>

<p>The normal way to write an assertion that the switch is turned on would be:</p>

<p><code>objc
expect([lightSwitch isTurnedOn]).to.beTruthy();
</code></p>

<p>However, if we define a custom predicate matcher:</p>

<p><code>objc
EXPMatcherInterface(isTurnedOn, (void));
</code></p>

<p>(Note: we haven&rsquo;t defined the matcher implementation, just it&rsquo;s interface)</p>

<p>You can now write your assertion as follows:</p>

<p><code>objc
expect(lightSwitch).isTurnedOn();
</code></p>

<h2>CONTRIBUTION</h2>

<p>You can find the public Tracker project <a href="https://www.pivotaltracker.com/projects/323267">here</a>.</p>

<h3>CONTRIBUTION GUIDELINES</h3>

<ul>
<li>Please use only spaces and indent 2 spaces at a time.</li>
<li>Please prefix instance variable names with a single underscore (<code>_</code>).</li>
<li>Please prefix custom classes and functions defined in the global scope with <code>EXP</code>.</li>
</ul>


<h3>CONTRIBUTORS</h3>

<ul>
<li><a href="https://github.com/kseebaldt">Kurtis Seebaldt</a></li>
<li><a href="https://github.com/akitchen">Andrew Kitchen</a></li>
<li><a href="https://github.com/joncooper">Jon Cooper</a></li>
<li><a href="https://github.com/twobitlabs">Christopher Pickslay</a></li>
<li><a href="https://github.com/TrahDivad">David Hart</a></li>
<li><a href="https://github.com/lukeredpath">Luke Redpath</a></li>
</ul>


<h2>LICENSE</h2>

<p>Copyright &copy; 2011-2012 Peter Jihoon Kim and contributors. This software is licensed under the <a href="http://github.com/petejkim/expecta/raw/master/LICENSE">MIT License</a>.</p>
						
						
					</div>
					
                        
                    
					
					
					<div class="index-column">
						<h2 class="index-title">Class References</h2>
						<ul>
							
							<li><a href="Classes/EXPBlockDefinedMatcher.html">EXPBlockDefinedMatcher</a></li>
							
							<li><a href="Classes/EXPDoubleTuple.html">EXPDoubleTuple</a></li>
							
							<li><a href="Classes/EXPDynamicPredicateMatcher.html">EXPDynamicPredicateMatcher</a></li>
							
							<li><a href="Classes/EXPExpect.html">EXPExpect</a></li>
							
							<li><a href="Classes/EXPFixCategoriesBug.html">EXPFixCategoriesBug</a></li>
							
							<li><a href="Classes/EXPFloatTuple.html">EXPFloatTuple</a></li>
							
							<li><a href="Classes/EXPUnsupportedObject.html">EXPUnsupportedObject</a></li>
							
							<li><a href="Classes/Expecta.html">Expecta</a></li>
							
						</ul>
					</div>
					
					
						
					<div class="index-column">
						
						<h2 class="index-title">Protocol References</h2>
						<ul>
							
							<li><a href="Protocols/EXPMatcher.html">EXPMatcher</a></li>
							
						</ul>
						
						
						<h2 class="index-title">Category References</h2>
						<ul>
							
							<li><a href="Categories/NSObject+Expecta.html">NSObject(Expecta)</a></li>
							
							<li><a href="Categories/NSValue+Expecta.html">NSValue(Expecta)</a></li>
							
						</ul>
						
					</div>
					
				</div>
				<div class="main-navigation navigation-bottom">
					<a href="hierarchy.html">Next</a>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2013 Peter Jihoon Kim. All rights reserved. (Last updated: 2013-04-01)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.5 (build 789)</a>.</span></p>
						
	
					</div>
				</div>
			</div>
		</article>		
	</body>
</html>